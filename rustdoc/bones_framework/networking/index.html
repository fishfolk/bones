<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Networked multi-player plugin."><title>bones_framework::networking - Rust</title><script>if(window.location.protocol!=="file:")document.head.insertAdjacentHTML("beforeend","SourceSerif4-Regular-6b053e98.ttf.woff2,FiraSans-Italic-81dc35de.woff2,FiraSans-Regular-0fe48ade.woff2,FiraSans-MediumItalic-ccf7e434.woff2,FiraSans-Medium-e1aa3f0a.woff2,SourceCodePro-Regular-8badfe75.ttf.woff2,SourceCodePro-Semibold-aa29a496.ttf.woff2".split(",").map(f=>`<link rel="preload" as="font" type="font/woff2"href="../../static.files/${f}">`).join(""))</script><link rel="stylesheet" href="../../static.files/normalize-9960930a.css"><link rel="stylesheet" href="../../static.files/rustdoc-ca0dd0c4.css"><meta name="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="bones_framework" data-themes="" data-resource-suffix="" data-rustdoc-version="1.93.0 (254b59607 2026-01-19)" data-channel="1.93.0" data-search-js="search-9e2438ea.js" data-stringdex-js="stringdex-a3946164.js" data-settings-js="settings-c38705f0.js" ><script src="../../static.files/storage-e2aeef58.js"></script><script defer src="../sidebar-items.js"></script><script defer src="../../static.files/main-a410ff4d.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-263c88ec.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-eab170b8.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-044be391.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><rustdoc-topbar><h2><a href="#">Module networking</a></h2></rustdoc-topbar><nav class="sidebar"><div class="sidebar-crate"><h2><a href="../../bones_framework/index.html">bones_<wbr>framework</a><span class="version">0.4.0</span></h2></div><div class="sidebar-elems"><section id="rustdoc-toc"><h2 class="location"><a href="#">Module networking</a></h2><h3><a href="#">Sections</a></h3><ul class="block top-toc"><li><a href="#matchmaking" title="Matchmaking">Matchmaking</a></li><li><a href="#synchronization" title="Synchronization">Synchronization</a></li><li><a href="#input" title="Input">Input</a></li><li><a href="#development--debugging" title="Development &#38; Debugging">Development &amp; Debugging</a><ul><li><a href="#local-sync-test" title="Local Sync Test">Local Sync Test</a></li></ul></li></ul><h3><a href="#reexports">Module Items</a></h3><ul class="block"><li><a href="#reexports" title="Re-exports">Re-exports</a></li><li><a href="#modules" title="Modules">Modules</a></li><li><a href="#structs" title="Structs">Structs</a></li><li><a href="#enums" title="Enums">Enums</a></li><li><a href="#constants" title="Constants">Constants</a></li><li><a href="#statics" title="Statics">Statics</a></li><li><a href="#traits" title="Traits">Traits</a></li><li><a href="#functions" title="Functions">Functions</a></li></ul></section><div id="rustdoc-modnav"><h2 class="in-crate"><a href="../index.html">In crate bones_<wbr>framework</a></h2></div></div></nav><div class="sidebar-resizer" title="Drag to resize sidebar"></div><main><div class="width-limiter"><section id="main-content" class="content"><div class="main-heading"><div class="rustdoc-breadcrumbs"><a href="../index.html">bones_framework</a></div><h1>Module <span>networking</span>&nbsp;<button id="copy-path" title="Copy item path to clipboard">Copy item path</button></h1><rustdoc-toolbar></rustdoc-toolbar><span class="sub-heading"><a class="src" href="../../src/bones_framework/networking.rs.html#1-987">Source</a> </span></div><details class="toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Networked multi-player plugin.</p>
<p>Bones uses a Peer-to-Peer, rollback networking model built on <a href="https://github.com/gschup/ggrs">GGRS</a>.</p>
<p>Messages are serialized/deserialized to a binary representation using <a href="https://docs.rs/serde"><code>serde</code></a> and the <a href="https://docs.rs/postcard"><code>postcard</code></a>
crate.</p>
<p>The major facets of our networking are:</p>
<ul>
<li><strong><a href="#matchmaking">Matchmaking</a>:</strong> How we connect clients to each-other and start an network match.</li>
<li><strong><a href="#synchronization">Synchronization</a>:</strong> How we synchronize a network game between multiple players.</li>
</ul>
<h3 id="matchmaking"><a class="doc-anchor" href="#matchmaking">§</a>Matchmaking</h3>
<p>There are currently two different matchmaking strategies: <a href="online/index.html" title="mod bones_framework::networking::online"><code>online</code></a> and <a href="lan/index.html" title="mod bones_framework::networking::lan"><code>lan</code></a>. Both of those
modules contain their own matchmaker with docs on how it works. Eventually we will probably have
additional matchmakers for Steam and the browser.</p>
<p>Regardless of the matchmaker, the goal is to find a match and establish a connection to the other
players. Once a match is established, the matchmaker must provide an implementation of
<a href="trait.NetworkSocket.html" title="trait bones_framework::networking::NetworkSocket"><code>NetworkSocket</code></a> that may be used to send <a href="https://github.com/gschup/ggrs">GGRS</a>, reliable, and unreliable messages.</p>
<p>Each matchmaker is free to implement this socket with whatever networking transport they wish,
allowing the Steam matchmaker, for example, to use the steam networking library, and the browser
matchmaker to use <code>WebTransport</code> or <code>WebRTC</code>.</p>
<h3 id="synchronization"><a class="doc-anchor" href="#synchronization">§</a>Synchronization</h3>
<p>Match synchronization, as mentioned above, is accomplished with <a href="https://github.com/gschup/ggrs">GGRS</a>, wich is a re-imagining of
the <a href="https://github.com/pond3r/ggpo/tree/master">GGPO</a> network SDK.</p>
<p>The <a href="trait.NetworkSocket.html" title="trait bones_framework::networking::NetworkSocket"><code>NetworkSocket</code></a> trait, which matchmakers are required to implement for their sockets, is
required to return an implementation of GGRS’s <a href="https://docs.rs/ggrs/0.9.2/ggrs/trait.NonBlockingSocket.html"><code>NonBlockingSocket</code></a> trait, so that it can send it’s
unreliable messages. The exact method for sending these messages depends on the matchmaker.</p>
<p>The key requirement for rollback networking is:</p>
<ul>
<li>The synchronized game loop must be <strong>deterministic</strong>.</li>
<li>We must have the ability to <strong>snapshot</strong> and <strong>restore</strong> the game state.</li>
<li>We must be able to run up to 8 game simulation frames in 16ms ( to achieve a 60 FPS frame rate,
even in the case where we have to rollback and re-simulate ).</li>
</ul>
<p>The integration with GGRS is implemented by the <a href="struct.GgrsSessionRunner.html" title="struct bones_framework::networking::GgrsSessionRunner"><code>GgrsSessionRunner</code></a>.</p>
<h3 id="input"><a class="doc-anchor" href="#input">§</a>Input</h3>
<p><a href="struct.GgrsSessionRunner.html" title="struct bones_framework::networking::GgrsSessionRunner"><code>GgrsSessionRunner</code></a> is generic over a couple of input traits, some of which have associated types with other trait bounds. This provides an API for game to define their input collection, control mapping, etc to be used by bones in networking.</p>
<h3 id="development--debugging"><a class="doc-anchor" href="#development--debugging">§</a>Development &amp; Debugging</h3>
<p>Here are some tips for debugging networking features while developing.</p>
<h4 id="local-sync-test"><a class="doc-anchor" href="#local-sync-test">§</a>Local Sync Test</h4>
<p>It can be cumbersome to start a new networked match every time you need to troubleshoot some part of
the game that may not be rolling back or restoring properly. To help with this, you can run the game
with the <code>--sync-test-check-distance 7</code> to make the game test rolling back and forward 8 times every
frame as a test when starting a local game.</p>
<p>This allows you to test the rollback without having to connect to a server. If things start popping
around the map or having other weird behaviors that they don’t have without the sync-test mode, then
you know you have a rollback issue.</p>
<blockquote>
<p><strong>ℹ️ Note:</strong> Just because you <strong>don’t</strong> have an issue in sync test mode, doesn’t mean that there
is no determinism issues. You still have to test network games with multiple game instances. There
are some non-determinism issues that only exhibit themselves when restarting the game.</p>
</blockquote>
</div></details><h2 id="reexports" class="section-header">Re-exports<a href="#reexports" class="anchor">§</a></h2><dl class="item-table reexports"><dt id="reexport.RngGenerator"><code>pub use crate::networking::random::<a class="struct" href="random/struct.RngGenerator.html" title="struct bones_framework::networking::random::RngGenerator">RngGenerator</a>;</code></dt><dt id="reexport.iroh"><code>pub use iroh;</code></dt></dl><h2 id="modules" class="section-header">Modules<a href="#modules" class="anchor">§</a></h2><dl class="item-table"><dt><a class="mod" href="input/index.html" title="mod bones_framework::networking::input">input</a></dt><dd>Input traits required by networking. These traits are networking specific, either only used in networking,
or extending other traits from <a href="../input/index.html" title="mod bones_framework::input"><code>crate::input</code></a> for networking.</dd><dt><a class="mod" href="lan/index.html" title="mod bones_framework::networking::lan">lan</a></dt><dd>LAN matchmaking and socket implementation.</dd><dt><a class="mod" href="online/index.html" title="mod bones_framework::networking::online">online</a></dt><dd>Matchmaking</dd><dt><a class="mod" href="online_lobby/index.html" title="mod bones_framework::networking::online_lobby">online_<wbr>lobby</a></dt><dt><a class="mod" href="online_matchmaking/index.html" title="mod bones_framework::networking::online_matchmaking">online_<wbr>matchmaking</a></dt><dt><a class="mod" href="prelude/index.html" title="mod bones_framework::networking::prelude">prelude</a></dt><dd>Module prelude.</dd><dt><a class="mod" href="random/index.html" title="mod bones_framework::networking::random">random</a></dt><dd>Global, deterministic RNG generation resource.</dd><dt><a class="mod" href="socket/index.html" title="mod bones_framework::networking::socket">socket</a></dt></dl><h2 id="structs" class="section-header">Structs<a href="#structs" class="anchor">§</a></h2><dl class="item-table"><dt><a class="struct" href="struct.DisconnectedPlayers.html" title="struct bones_framework::networking::DisconnectedPlayers">Disconnected<wbr>Players</a></dt><dd>Resource tracking which players have been disconnected.
May not be in world if no disconnects.</dd><dt><a class="struct" href="struct.GameMessage.html" title="struct bones_framework::networking::GameMessage">Game<wbr>Message</a></dt><dd>Wraps <a href="../external/ggrs/struct.Message.html" title="struct bones_framework::external::ggrs::Message"><code>ggrs::Message</code></a> with included <code>match_id</code>, used to determine if message received
from current match.</dd><dt><a class="struct" href="struct.GgrsConfig.html" title="struct bones_framework::networking::GgrsConfig">Ggrs<wbr>Config</a></dt><dd>The <a href="../external/ggrs/trait.Config.html" title="trait bones_framework::external::ggrs::Config"><code>ggrs::Config</code></a> implementation used by Jumpy.</dd><dt><a class="struct" href="struct.GgrsSessionRunner.html" title="struct bones_framework::networking::GgrsSessionRunner">Ggrs<wbr>Session<wbr>Runner</a></dt><dd><a href="../prelude/trait.SessionRunner.html" title="trait bones_framework::prelude::SessionRunner"><code>SessionRunner</code></a> implementation that uses <a href="../external/ggrs/index.html" title="mod bones_framework::external::ggrs"><code>ggrs</code></a> for network play.</dd><dt><a class="struct" href="struct.GgrsSessionRunnerInfo.html" title="struct bones_framework::networking::GgrsSessionRunnerInfo">Ggrs<wbr>Session<wbr>Runner<wbr>Info</a></dt><dd>The info required to create a <a href="struct.GgrsSessionRunner.html" title="struct bones_framework::networking::GgrsSessionRunner"><code>GgrsSessionRunner</code></a>.</dd><dt><a class="struct" href="struct.NetworkMatchSocket.html" title="struct bones_framework::networking::NetworkMatchSocket">Network<wbr>Match<wbr>Socket</a></dt><dd>Resource containing the <a href="trait.NetworkSocket.html" title="trait bones_framework::networking::NetworkSocket"><code>NetworkSocket</code></a> implementation while there is a connection to a
network game.</dd><dt><a class="struct" href="struct.OnlineSyncingInfo.html" title="struct bones_framework::networking::OnlineSyncingInfo">Online<wbr>Syncing<wbr>Info</a></dt><dd>Holds data for an online session</dd><dt><a class="struct" href="struct.PlayerNetworkStats.html" title="struct bones_framework::networking::PlayerNetworkStats">Player<wbr>Network<wbr>Stats</a></dt><dd>A schema-compatible wrapper for ggrs <code>NetworkStats</code> struct contains networking stats.</dd><dt><a class="struct" href="struct.SyncingInfo.html" title="struct bones_framework::networking::SyncingInfo">Syncing<wbr>Info</a></dt><dd>Resource updated each frame exposing syncing/networking information in the current session.</dd></dl><h2 id="enums" class="section-header">Enums<a href="#enums" class="anchor">§</a></h2><dl class="item-table"><dt><a class="enum" href="enum.NetworkError.html" title="enum bones_framework::networking::NetworkError">Network<wbr>Error</a></dt><dd>Possible errors returned by network loop.</dd><dt><a class="enum" href="enum.NetworkInputStatus.html" title="enum bones_framework::networking::NetworkInputStatus">Network<wbr>Input<wbr>Status</a></dt><dd>Indicates if input from networking is confirmed, predicted, or if player is disconnected.</dd><dt><a class="enum" href="enum.SocketTarget.html" title="enum bones_framework::networking::SocketTarget">Socket<wbr>Target</a></dt><dd>The destination for a reliable network message.</dd></dl><h2 id="constants" class="section-header">Constants<a href="#constants" class="anchor">§</a></h2><dl class="item-table"><dt><a class="constant" href="constant.NETWORK_DEFAULT_SIMULATION_FRAME_RATE.html" title="constant bones_framework::networking::NETWORK_DEFAULT_SIMULATION_FRAME_RATE">NETWORK_<wbr>DEFAULT_<wbr>SIMULATION_<wbr>FRAME_<wbr>RATE</a></dt><dd>Default frame rate to run at if user provides none</dd><dt><a class="constant" href="constant.NETWORK_FRAME_RATE_FACTOR.html" title="constant bones_framework::networking::NETWORK_FRAME_RATE_FACTOR">NETWORK_<wbr>FRAME_<wbr>RATE_<wbr>FACTOR</a></dt><dd>Muliplier for framerate that will be used when playing an online match.</dd><dt><a class="constant" href="constant.NETWORK_LOCAL_INPUT_DELAY_DEFAULT.html" title="constant bones_framework::networking::NETWORK_LOCAL_INPUT_DELAY_DEFAULT">NETWORK_<wbr>LOCAL_<wbr>INPUT_<wbr>DELAY_<wbr>DEFAULT</a></dt><dd>Amount of frames GGRS will delay local input.</dd><dt><a class="constant" href="constant.NETWORK_MAX_PREDICTION_WINDOW_DEFAULT.html" title="constant bones_framework::networking::NETWORK_MAX_PREDICTION_WINDOW_DEFAULT">NETWORK_<wbr>MAX_<wbr>PREDICTION_<wbr>WINDOW_<wbr>DEFAULT</a></dt><dd>Number of frames client may predict beyond confirmed frame before freezing and waiting
for inputs from other players. Default value if not specified in <a href="struct.GgrsSessionRunnerInfo.html" title="struct bones_framework::networking::GgrsSessionRunnerInfo"><code>GgrsSessionRunnerInfo</code></a>.</dd></dl><h2 id="statics" class="section-header">Statics<a href="#statics" class="anchor">§</a></h2><dl class="item-table"><dt><a class="static" href="static.RUNTIME.html" title="static bones_framework::networking::RUNTIME">RUNTIME</a></dt><dd>Runtime, needed to execute network related calls.</dd></dl><h2 id="traits" class="section-header">Traits<a href="#traits" class="anchor">§</a></h2><dl class="item-table"><dt><a class="trait" href="trait.GgrsSocket.html" title="trait bones_framework::networking::GgrsSocket">Ggrs<wbr>Socket</a></dt><dd>Automatically implemented for <a href="trait.NetworkSocket.html" title="trait bones_framework::networking::NetworkSocket"><code>NetworkSocket</code></a> + <a href="../external/ggrs/trait.NonBlockingSocket.html" title="trait bones_framework::external::ggrs::NonBlockingSocket"><code>ggrs::NonBlockingSocket&lt;usize&gt;</code></a>.</dd><dt><a class="trait" href="trait.NetworkSocket.html" title="trait bones_framework::networking::NetworkSocket">Network<wbr>Socket</a></dt><dd>Trait that must be implemented by socket connections establish by matchmakers.</dd></dl><h2 id="functions" class="section-header">Functions<a href="#functions" class="anchor">§</a></h2><dl class="item-table"><dt><a class="fn" href="fn.get_network_endpoint.html" title="fn bones_framework::networking::get_network_endpoint">get_<wbr>network_<wbr>endpoint</a></dt><dd>Get the network endpoint used for all communications.</dd></dl></section></div></main></body></html>